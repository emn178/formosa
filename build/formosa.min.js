/**
 * [formosa]{@link https://github.com/emn178/formosa}
 *
 * @version 0.2.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2016
 * @license MIT
 */
!function(t){"use strict";function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(t,e,n){l[e]||(l[e]={vendor:t}),p[t]||(p[t]={},s[t]={}),p[t][e]=n,s[t][e]={}}function r(){t("input:not([data-norender])").each(o)}function o(){var e=t(this),n=e.attr("type"),r=e.data("vendor")||l[n]&&l[n].vendor,o=p[r],a=o&&o[n];if(a&&a.render&&(!a.available||a.available===!0||a.available())){a.available=!0,e.data("norender",!0).data("type",n);var i=e.data("options")||s[r][n].options||l[n].options||{};a.render.call(this,i)}}function a(t){var n=t.shift();if(!u[n])return this;var r,o=t.length?"set":"get",a=o+e(n),i=this.eq(0),s=i.data("type");if(s){var d=i.data("vendor")||l[s]&&l[s].vendor,c=p[d][s];r=c[a]?c[a].apply(i[0],t):u[n].call(i,t)}else r=u[n].call(i,t);return"get"==o?r:this}function i(e){if(t(this).prop("readonly"))return e.stopPropagation(),!1}var l={},s={},p={},u={value:function(e){return console.log(e),t.fn.val.apply(this,e)},disabled:function(e){return e.unshift("disabled"),t.fn.prop.apply(this,e)},readonly:function(e){return e.unshift("readonly"),t.fn.prop.apply(this,e)}};t.fn.input=function(){return this.each(o),a.call(this,Array.prototype.slice.call(arguments,0))},t(document).on("ready page:load",function(){t("<style>"+formosa.css+"</style>").appendTo("head"),setTimeout(r)}),window.formosa=t.formosa={_readonly:i,render:r,register:n,types:l,vendors:s}}(jQuery),formosa.css=".kolor-picker-input{width:35px;height:30px;border:1px solid #000;text-indent:-999px;cursor:default}.kolor-picker-input:focus{outline-offset:0;outline:0}.kolor-picker-wrapper{position:relative;display:inline-flex;background-image:url(data:image/gif;base64,R0lGODlhDAAMAIABAMzMzP///yH5BAEAAAEALAAAAAAMAAwAAAIWhB+ph5ps3IMyQFBvzVRq3zmfGC5QAQA7)}.kolor-picker-readonly{display:none;position:absolute;top:0;left:0;width:35px;height:30px}.kolor-picker-input[readonly]+.kolor-picker-readonly{display:block;cursor:not-allowed}",function(t){var e=t();formosa.register("kolor-picker","color",{available:function(){return t.fn.kolorPicker&&(t(document).on("page:before-unload",function(){e.length||(e=t(".cp-color-picker"))}),t(document).on("page:load",function(){e.length&&t("body").append(e)})),t.fn.kolorPicker},render:function(e){var n=t(this),r=e.onSelect;e.onSelect=function(t){n.val(t),r&&r.call(this,t)},n.addClass("kolor-picker-input").attr("autocomplete","off").attr("type","text").kolorPicker(e).wrap('<span class="kolor-picker-wrapper" />').after('<span class="kolor-picker-readonly" />')},setValue:function(e){t(this).kolorPicker("setColor",e)}})}(jQuery),function(t){t.fn.datepicker&&t.fn.datepicker.noConflict&&(t.fn.bootstrapDP=t.fn.datepicker.noConflict()),formosa.register("jquery-ui","date",{available:function(){return t.fn.datepicker},render:function(e){var n=e.beforeShow;e.beforeShow=function(e,r){return!t(e).prop("readonly")&&void(n&&n.call(this,e,r))},t(this).attr("type","text").datepicker(e)}}),formosa.register("bootstrap-datepicker","date",{available:function(){return t.fn.bootstrapDP},render:function(e){t(this).attr("type","text").on("mousedown",formosa._readonly).bootstrapDP(e).mousedown()}})}(jQuery),function(t){formosa.register("bootstrap-datetimepicker","datetime",{available:function(){return t.fn.datetimepicker},render:function(e){var n=t(this),r=t('<input type="hidden"/>').attr("name",n.attr("name")).val(n.val()).insertAfter(n);n.datetimepicker(e).data("hidden",r).removeAttr("name").attr("type","text").closest("form").submit(function(){r.val(moment(o.date()).format())});var o=n.data("DateTimePicker");o.date(new Date(r.val())),"static"==n.parent().css("position")&&n.parent().css("position","relative")},getValue:function(){return moment(t(this).data("DateTimePicker").date()).format()},setValue:function(e){t(this).data("DateTimePicker").date(new Date(e))},setDisabled:function(e){t(this).prop("disabled",e).data("hidden").prop("disabled",e)}})}(jQuery),function(t){formosa.register("intl-tel","intl-tel",{available:function(){return t.fn.intlTelInput},render:function(e){var n=t(this),r=t('<input type="hidden"/>').attr("name",n.attr("name")).val(n.val()).insertAfter(n);n.intlTelInput(e),n.removeAttr("name").data("hidden",r).attr("type","tel").closest("form").submit(function(){r.val(n.intlTelInput("getNumber"))})},getValue:function(){return t(this).intlTelInput("getNumber")},setValue:function(e){t(this).intlTelInput("setNumber",e)},setDisabled:function(e){t(this).prop("disabled",e).data("hidden").prop("disabled",e)}})}(jQuery),function(t){formosa.register("jquery-ui-month-picker","month",{available:function(){return t.fn.datepicker},render:function(e){t(this).attr("type","text").on("mousedown click",formosa._readonly).MonthPicker(e)}})}(jQuery),function(t){function e(e,n,r){var o=t(e).prop(n,r).next();o.find("input").prop(n,r),o.find("a").toggle(!r)}formosa.register("jquery-tags-input","tags",{available:function(){return t.fn.tagsInput},render:function(e){t(this).tagsInput(e)},setReadonly:function(t){e(this,"readonly",t)},setDisabled:function(t){e(this,"disabled",t)}}),formosa.register("bootstrap-tags-input","tags",{available:function(){return t.fn.tagsinput},render:function(e){t(this).tagsinput(e)},setReadonly:function(e){var n=t(this).prop("readonly",e).prev();n.find("input").prop("readonly",e),n.find('[data-role="remove"]').toggle(!e)}})}(jQuery);